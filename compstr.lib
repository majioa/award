COMPARE_STRING	PROC
	;DS:SI - STRING 1 
	;ES:DI - STRING 2
	;CX - LEN
	;[COMPARE_FLAG_] = 1 ;a=A
	PUSH	AX
	PUSH	SI
	PUSH	DI
COMPARE_STRING_1:
	LODSB
	CALL	COMPARE_CASE
	MOV	AH,AL
	MOV	AL,ES:[DI]
	INC	DI
	CALL	COMPARE_CASE
	CMP	AL,AH
	CLC
	JNZ	COMPARE_STRING_ERROR
	LOOP	COMPARE_STRING_1
	STC
COMPARE_STRING_ERROR:
	CMC
	POP	DI
	POP	SI
	POP	AX
	RET
COMPARE_FLAG_	DB	0
ENDP
COMPARE_CASE	PROC
	TEST	CS:[COMPARE_FLAG_],1
	JZ	COMPARE_CASE_1
	CMP	AL,'a'
	JB	COMPARE_CASE_1
	CMP	AL,'z'
	JA	COMPARE_CASE_1
	SUB	AL,20H
COMPARE_CASE_1:
	RET
ENDP
